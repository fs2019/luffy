---- drf, luffyapi/
settings/,自定义配置目录；配置manage.py: os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'luffyapi.settings.dev')

日志：用 python 本身日志功能，https://docs.djangoproject.com/zh-hans/4.1/topics/logging/,复制事例到settings/dev.py,

自定义异常，utils/exceptions.py,配置使用settings/dev.py: REST_FRAMEWORK

mysql数据库，mysql -uroot -poldboy ; show databases; create database luffy charset=utf8mb4;
create user luffy_user identified by 'luffy'; grant all privileges on luffy.* to 'luffy_user'@'%' ;
flush privileges; mysql -uluffy_user -pluffy ;
配置settings/dev.py: DATABASES
pip install pymysql (官方推荐 mysqlclient) ; 配置 luffyapi/__init__.py:
    import pymysql
    pymysql.install_as_MySQLdb()
(st10_django4) PS C:\Users\...\st10_django4> pip install pymysql -i https://pypi.douban.com/simple
    Successfully installed pymysql-1.0.2
此项目无任何报错可正常运行；
运行项目如果报错：mysqlclient 1.4.0 or newer is required: you have
注释检测语句：django.db.backends/mysql/basy.py, 大概 35-36 行，
    if version < (1,3,13):
        raise ImproperlyConfigured('mysqlclient 1.4.0 or newer is required: you have %s' % Database._version__)
运行项目如果报错：'str' object has no attribute 'decode'
修改增加行：django.db.backends/mysql/operations.py,大概 145 行，
    if query is not None:
        query = query.encode() # 增加此行
        query = query.decode(errors='replace')
pycharm 启动项目报错：'cryptography' package is required for sha256_password or caching_sha2_password auth methods
2个解决方法：1，使用mysql -uluffy_user -pluffy 先登陆一次，即使退出，pycharm启动项目就不报错
    方法2，安装cryptography包， 未测试
    pip3 install cryptography -i https://pypi.douban.com/simple
    清华大学源：pip3 install cryptography -i https://pypi.tuna.tsinghua.edu.cn/simple

轮播图需要： pip install pillow -i https://pypi.douban.com/simple   # Successfully installed pillow-9.4.0

上传文件配置：settings/dev.py, STATICFILES_DIRS=[os.path.join(BASE_DIR,'static')]
    MEDIA_ROOT=os.path.join(BASE_DIR,'uploads') ; MEDIA_URL = '/media/'
luffyapi/urls.py, serve...
创建目录 static/: s05_luffy\luffyapi\luffyapi\static\

创建app: cd luffyapi/apps/,   home/,
(st10_django4) PS C:\Users\...\luffyapi\apps> python ..\..\manage.py startapp home
由于apps/目录为手工创建，django不能识别，所以要添加 python 路径，settings/dev.py
    import sys; sys.path.insert(0,os.path.join(BASE_DIR,'apps')); import home ; INSTALLED_APPS=['home',]
构建模型，luffyapi/apps/home/models.py,
(st10_django4) PS C:\Users\...\luffyapi> python .\manage.py makemigrations
    Migrations for 'home':
      luffyapi\apps\home\migrations\0001_initial.py
        - Create model Banner
(st10_django4) PS C:\Users\...\luffyapi> python .\manage.py migrate
    Operations to perform:
      Apply all migrations: admin, auth, contenttypes, home, sessions
    Running migrations:
      Applying contenttypes.0001_initial... OK
      Applying auth.0001_initial... OK
      Applying admin.0001_initial... OK
      Applying admin.0002_logentry_remove_auto_add... OK
      Applying admin.0003_logentry_add_action_flag_choices... OK
      Applying contenttypes.0002_remove_content_type_name... OK
      Applying auth.0002_alter_permission_name_max_length... OK
      Applying auth.0003_alter_user_email_max_length... OK
      Applying auth.0004_alter_user_username_opts... OK
      Applying auth.0005_alter_user_last_login_null... OK
      Applying auth.0006_require_contenttypes_0002... OK
      Applying auth.0007_alter_validators_add_error_messages... OK
      Applying auth.0008_alter_user_username_max_length... OK
      Applying auth.0009_alter_user_last_name_max_length... OK
      Applying auth.0010_alter_group_name_max_length... OK
      Applying auth.0011_update_proxy_permissions... OK
      Applying auth.0012_alter_user_first_name_max_length... OK
      Applying home.0001_initial... OK
      Applying sessions.0001_initial... OK

创建drf序列化器，luffyapi/apps/home/serializers.py
创建drf视图,luffyapi/apps/home/view.py, 导入序列化器，

设置常量文件，settings/constants.py,   luffyapi/apps/home/view.py 导入

只有django2版本，貌似后面转为纯前端，xadmin3, 18包全部单独卸载，不兼容的地方太多
pip install https://codeload.github.com/sshwsfc/xadmin/zip/django2 -i https://pypi.douban.com/simple
    Successfully installed defusedxml-0.7.1 diff-match-patch-20200713 django-crispy-forms-1.14.0
    django-formtools-2.4 django-import-export-3.0.2 django-reversion-5.0.4 et-xmlfile-1.1.0 future-0.18.2
    httplib2-0.9.2 markuppy-1.14 odfpy-1.4.1 openpyxl-3.0.10 pyyaml-6.0 six-1.16.0 tablib-3.3.0 xadmin-2.0.1
    xlrd-2.0.1 xlwt-1.3.0
settings/dev.py, INSTALLED_APPS=['xadmin','crispy_forms','reversion',]
pip install https://github.com/sshwsfc/xadmin/tarball/master  # Successfully installed xadmin-0.6.1
pip uninstall xadmin
    Found existing installation: xadmin 0.6.1
    Uninstalling xadmin-0.6.1:
      Would remove:
        c:\users\feng\fengshuang\study\pythonitem\st10_django4\lib\site-packages\xadmin-0.6.1-py3.11.egg-info
        c:\users\feng\fengshuang\study\pythonitem\st10_django4\lib\site-packages\xadmin\*
    Proceed (Y/n)? y
      Successfully uninstalled xadmin-0.6.1

pip list # 28个, xadmin有18个包,
    Package              Version
    -------------------- --------
    asgiref              3.6.0
    defusedxml           0.7.1
    diff-match-patch     20200713
    Django               4.1.5
    django-cors-headers  3.13.0
    django-crispy-forms  1.14.0
    django-formtools     2.4
    django-import-export 3.0.2
    django-reversion     5.0.4
    djangorestframework  3.14.0
    et-xmlfile           1.1.0
    future               0.18.2
    httplib2             0.9.2
    MarkupPy             1.14
    odfpy                1.4.1
    openpyxl             3.0.10
    Pillow               9.4.0
    pip                  22.3.1
    PyMySQL              1.0.2
    pytz                 2022.7
    PyYAML               6.0
    setuptools           65.5.0
    six                  1.16.0
    sqlparse             0.4.3
    tablib               3.3.0
    tzdata               2022.7
    xlrd                 2.0.1
    xlwt                 1.3.0
pip list # 11个，
    Package             Version
    ------------------- -------
    asgiref             3.6.0
    Django              4.1.5
    django-cors-headers 3.13.0
    djangorestframework 3.14.0
    Pillow              9.4.0
    pip                 22.3.1
    PyMySQL             1.0.2
    pytz                2022.7
    setuptools          65.5.0
    sqlparse            0.4.3
    tzdata              2022.7
pip index versions xlwt -i https://pypi.douban.com/simple
    WARNING: pip index is currently an experimental command. It may be removed/changed in a future
    release without prior warning. xlwt (1.3.0)
    Available versions: 1.3.0, 1.2.0, 1.1.2, 1.1.1, 1.0.0, 0.7.5, 0.7.4, 0.7.3, 0.7.2, 0.7.1, 0.7.0

 python .\manage.py createsuperuser : admin:root@123




---- vue, luffy_pc/, cd s05_luffy ;
全局安装,注意下目录， vue,webpack,webpack-cli,vue-cli,
(st10_django4) PS C:\Users\Feng\FengShuang\study\pythonItem\st10_django4\Scripts\s05_luffy> npm install vue
    npm WARN deprecated sourcemap-codec@1.4.8: Please use @jridgewell/sourcemap-codec instead
    added 21 packages in 5s
(st10_django4) PS C:\Users\...\s00nvm\v18.13.0> npm install webpack -g
    added 77 packages in 4s
(st10_django4) PS C:\Users\Feng\...\s00nvm\v18.13.0> npm install webpack-cli -g
    added 117 packages in 4s
(st10_django4) PS C:\Users\...\st10_django4\Scripts\s00nvm\v18.13.0> webpack -v
    System:
    OS: Windows 10 10.0.22000
    CPU: (8) x64 11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz
    Memory: 4.67 GB / 15.70 GB
  Binaries:
    Node: 18.13.0 - ~\FengShuang\study\pythonItem\st10_django4\Scripts\s00nvm\v18.13.0\node.EXE
    npm: 8.19.3 - ~\FengShuang\study\pythonItem\st10_django4\Scripts\s00nvm\v18.13.0\npm.CMD
  Browsers:
    Edge: Spartan (44.22000.120.0), Chromium (108.0.1462.76)
    Internet Explorer: 11.0.22000.120
(st10_django4) PS C:\Users\...\s00nvm\v18.13.0> npm install vue-cli -g
    npm WARN deprecated har-validator@5.1.5: this library is no longer supported
    npm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions
        may use Math.random() in certain circumstances, which is known to be problematic.
        See https://v8.dev/blog/math-random for details.
    npm WARN deprecated request@2.88.2: request has been deprecated, see
        https://github.com/request/request/issues/3142
    npm WARN deprecated coffee-script@1.12.7: CoffeeScript on NPM has moved to "coffeescript" (no hyphen)
    npm WARN deprecated vue-cli@2.9.6: This package has been deprecated in favour of @vue/cli
    added 230 packages in 10s
(st10_django4) PS C:\Users\Feng\FengShuang\study\pythonItem\st10_django4\Scripts\s00nvm\v18.13.0> vue -V
    2.9.6
(st10_django4) PS C:\Users\Feng\FengShuang\study\pythonItem\st10_django4\Scripts\s00nvm\v18.13.0> npm list
    C:\Users\Feng\FengShuang\study\pythonItem\st10_django4\Scripts\s00nvm\v18.13.0
    +-- corepack@0.15.2 extraneous
    +-- npm@8.19.3 extraneous
    +-- vue-cli@2.9.6 extraneous
    +-- webpack-cli@5.0.1 extraneous
    `-- webpack@5.75.0 extraneous
(st10_django4) PS C:\Users\Feng\FengShuang\study\pythonItem\st10_django4\Scripts\s05_luffy\lufei_pc> npm list
    lufei_pc@1.0.0 C:\Users\Feng\FengShuang\study\pythonItem\st10_django4\Scripts\s05_luffy\lufei_pc
    +-- autoprefixer@7.2.6
    +-- babel-core@6.26.3
    +-- babel-helper-vue-jsx-merge-props@2.0.3
    +-- babel-loader@7.1.5
    +-- babel-plugin-syntax-jsx@6.18.0
    +-- babel-plugin-transform-runtime@6.23.0
    +-- babel-plugin-transform-vue-jsx@3.7.0
    +-- babel-preset-env@1.7.0
    +-- babel-preset-stage-2@6.24.1
    +-- bindings@1.5.0 extraneous
    +-- chalk@2.4.2
    +-- copy-webpack-plugin@4.6.0
    +-- css-loader@0.28.11
    +-- extract-text-webpack-plugin@3.0.2
    +-- file-loader@1.1.11
    +-- file-uri-to-path@1.0.0 extraneous
    +-- friendly-errors-webpack-plugin@1.7.0
    +-- html-webpack-plugin@2.30.1
    +-- nan@2.17.0 extraneous
    +-- node-notifier@5.4.5
    +-- optimize-css-assets-webpack-plugin@3.2.1
    +-- ora@1.4.0
    +-- portfinder@1.0.32
    +-- postcss-import@11.1.0
    +-- postcss-loader@2.1.6
    +-- postcss-url@7.3.2
    +-- rimraf@2.7.1
    +-- semver@5.7.1
    +-- shelljs@0.7.8
    +-- uglifyjs-webpack-plugin@1.3.0
    +-- url-loader@0.5.9
    +-- vue-loader@13.7.3
    +-- vue-router@3.6.5
    +-- vue-style-loader@3.1.2
    +-- vue-template-compiler@2.7.14
    +-- vue@2.7.14
    +-- webpack-bundle-analyzer@2.13.1
    +-- webpack-dev-server@2.11.5
    +-- webpack-merge@4.2.2
    `-- webpack@3.12.0

vue init webpack lufei_pc ;
    1,提示项目名称或使用前面指定的 lufei_pc ,
    2,提示是否编译生成2个选项 runtime+complier(一般选项) ,
    3，提示是否安装 vue-router ,一般安装，
    4，提示是否 use eslint to lint your code 一般不安装,语法检测
    5，set up unit tests? no ,
    6，setup e2e tests with  nightwatch? no,
    7,should we run `npm install` ? 3个选项： yes,use npm？ yes use yarn? no,will my self?
(st10_django4) PS C:\Users\...\s05_luffy> vue init webpack lufei_pc
? Project name lufei_pc
? Project description A Vue.js project
? Author fs2019 <wangshuangqing2009@163.com>
? Vue build standalone
? Install vue-router? Yes
? Use ESLint to lint your code? No
? Set up unit tests No
? Setup e2e tests with Nightwatch? No
? Should we run `npm install` for you after the project has been created? (recommended) npm
   vue-cli · Generated "lufei_pc".
# Installing project dependencies ...
# ========================
npm WARN deprecated stable@0.1.8: Modern JS already guarantees Array#sort() is a stable sort,
    so this library is deprecated. See the compatibility table on MDN: https://developer.mozilla.org
        /en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#browser_compatibility
npm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated
npm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated
npm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random()
    in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details
npm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated
npm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated
npm WARN deprecated flatten@1.0.3: flatten is deprecated in favor of utility frameworks such as lodash.
npm WARN deprecated acorn-dynamic-import@2.0.2: This is probably built in to whatever tool you're using.
    If you still need it... idk
npm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the
    URLSearchParams API instead.
npm WARN deprecated browserslist@2.11.3: Browserslist 2 could fail on reading Browserslist >3.0 config
    used in other tools.
npm WARN deprecated html-webpack-plugin@2.30.1: out of support
npm WARN deprecated extract-text-webpack-plugin@3.0.2: Deprecated. Please use https://github.com/
    webpack-contrib/mini-css-extract-plugin
npm WARN deprecated uglify-es@3.3.9: support for ECMAScript is superseded by `uglify-js` as of v3.13.0
npm WARN deprecated bfj-node4@5.3.1: Switch to the `bfj` package for fixes and new features!
npm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to
    chokidar 3 with 15x fewer dependencies
npm WARN deprecated browserslist@1.7.7: Browserslist 2 could fail on reading Browserslist >3.0 config used
    in other tools.
npm WARN deprecated browserslist@1.7.7: Browserslist 2 could fail on reading Browserslist >3.0 config used
    in other tools.
npm WARN deprecated browserslist@1.7.7: Browserslist 2 could fail on reading Browserslist >3.0 config used
    in other tools.
npm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to
    chokidar 3 with 15x fewer dependencies
npm WARN deprecated svgo@0.7.2: This SVGO version is no longer supported. Upgrade to v2.x.x.
npm WARN deprecated svgo@1.3.2: This SVGO version is no longer supported. Upgrade to v2.x.x.
npm WARN deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage
    due to the number of issues. Because of the V8
engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is
    polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual
    version of core-js.
added 1305 packages in 35s
# Project initialization finished!
# ========================
To get started:
  cd lufei_pc
  npm run dev
Documentation can be found at https://vuejs-templates.github.io/webpack

删除原有显示：
src/router/index.js, 注释 HelloWorld 相关路由与注册，更改路由模式 默认hash, mode:'history',
src/App.vue,  <template>中注释：<!-- <img src="./assets/logo.png"> --> ； <style>中：注释样式 /* #app */；
src/main.js,

创建home组件，src/components/Home.vue,  src/router/index.js, 路由注册与分配，
创建全局配置文件，src/settings.js, src/main.js 注册使用，

npm i element-ui -S # npm install element-ui --save
(st10_django4) PS C:\Users\...\s05_luffy\lufei_pc> npm i element-ui -S
    added 6 packages in 4s
element-ui 导入 src/main.js,
创建css文件 static/css/reset.css, main.js导入: import '../static/css/reset.css'




---- 主机配置
域名配置,添加2条：sudo vim /etc/hosts
    127.0.0.1 api.luffycity.cn
    127.0.0.1 www.luffycity.cn
luffyapi/settings/dev.py, ALLOWED_HOSTS=['api.luffycity.cn','www.luffycity.cn']
luffy_pc/config/index.js, 配置域名与端口（只能大于1024）

跨域问题：
django: pip install django-cors-headers -i https://pypi.douban.com/simple
    Successfully installed django-cors-headers-3.13.0
settings/dev.py, INSTALLED_APPS=['corsheaders',],MIDDLEWARE=['corsheaders.middleware.CorsMiddleware',]
    CORS_ORIGIN_WHITELIST=('http://www.luffycity.cn:8080','http://127.0.0.1:8080');
    CORS_ALLOW_CREDENTIALS=False ;
vue: axios, lufei_pc/src/main.js: import axios from 'axios'
(st10_django4) PS C:\Users\...\s05_luffy\lufei_pc> npm i axios -S
    added 6 packages in 5s



---- 代码同步, git/svn/ftp,
-- svn
伪流程：user01: svn commit; svn update; user02: svn checkout; svn commit; user03: svn checkout; svn commit;
-- git，伪流程：user01: git push; git commit; user02: git pull; git push;
没有仓库：
mkdir gitdemo; cd getdemo; git init 初始化仓库，生成隐藏目录.git/,配置目录; git clone; git status;
git commit -m 'first commit'; 会提示账号，--global会保存在 git 全局配置 .gitconfig 文件中，不加则仅保存在当前 项目中；
git config --global user.email 'you#example.com'; git config --global user.name 'your name' ;
touch 1.html; git add . (.即当前目录下所有子目录 或指定目录 git add drfdemo); git commit -m 'second commit' ;
git reflog 查看本地版本号； git reset --hard 回退的本地版本号 ; git log 查看详细日志；
git branch 查看分支； git branch dev 创建dev分支；git checkout dev 切换分支;
git checkout master; git branch -D dev 删除分支不能删除已进入的分支要切换到其它分支才能删除；

在gitee站点中先创建的仓库名 luffy ，用户名 mooluo , 指定变量 origin 的值为 https://gitee.com/mooluo/luffy.git
git remote add origin https://gitee.com/mooluo/luffy.git;
git push -u origin master:master ；master为远程分支名称;

已有仓库：cd gitdemo; git remote add origin https://gitee.com/mooluo/luffy.git;
git push -u origin master;

git 练习：
(st10_django4) PS C:\Users\Feng\FengShuang\study\pythonItem\st10_django4\Scripts\s05_luffy> git init
Initialized empty Git repository in C:/Users/Feng/FengShuang/study/pythonItem/st10_django4/Scripts/s05_luffy/.git/

